@{
    Layout = null;
}
<!DOCTYPE html>
<html>
<head runat="server">
    <script type="text/javascript" src="@Url.Content("~/Scripts/jquery-1.10.2.min.js")"></script>
    <link href="@Url.Content("~/Media/layout.css")" rel="stylesheet" type="text/css" />
    <style>
        p, body, td {
            font-family: Tahoma, Arial, Sans-Serif;
            font-size: 10pt;
        }
    </style>
    <title></title>
</head>
<body style="padding:10px">
    <form id="f" method="post">
        @*action="@Url.Action("New")">*@

    <h1>Nowe wydarzenie</h1>

    <div>Tekst</div>
    <div>@Html.TextBox("Text")</div>

    <div>Początek</div>
    <div>@Html.TextBox("Start")</div>

    <div>Koniec</div>
    <div>@Html.TextBox("End")</div>

    <div>Pracownik</div>
    <div>@Html.DropDownList("Resource")</div>

    <div style="border-bottom: 2px solid #d0d0d0; margin-top:10px; margin-bottom: 10px;"></div>
    <!-- Recurrence section -->
    <script type="text/javascript" src="@Url.Content("~/Scripts/DayPilot/recurrence.js?v=5")"></script>
    Powtarzaj:
    <select id="repeat">
        <option value="norepeat">Nie powtarzaj</option>
        <option value="daily">Dziennie</option>
        <option value="weekly">Tygodniowo</option>
        <option value="monthly">Miesięcznie</option>
        <option value="annually">Rocznnie</option>
    </select>

    <div id="select_norepeat" style="display:none">
    </div>

    <div id="select_daily" style="display:none">
        Powtarzaj co <input id="daily_every" style="width: 20px;" value="1" /> dzień.
    </div>

    <div id="select_weekly" style="display:none">
        Powtarzaj co <input id="weekly_every" style="width: 20px;" value="1" /> tydzień.
        <div id="select_weekly_error" style="display:none; margin-top: 5px; padding: 2px; background-color: #FFF1A8;">Proszę wybrać przynajmniej jeden dzień:</div>
        <br />
        <table>
            <tr>
                <td>W następujące dni: </td>
                <td><label for="weekly_0"><input type="checkbox" id="weekly_0" />Nie</label></td>
                <td><label for="weekly_1"><input type="checkbox" id="weekly_1" />Pon</label></td>
                <td><label for="weekly_2"><input type="checkbox" id="weekly_2" />Wto</label></td>
                <td><label for="weekly_3"><input type="checkbox" id="weekly_3" />Śro</label></td>
                <td><label for="weekly_4"><input type="checkbox" id="weekly_4" />Czw</label></td>
                <td><label for="weekly_5"><input type="checkbox" id="weekly_5" />Pią</label></td>
                <td><label for="weekly_6"><input type="checkbox" id="weekly_6" />Sob</label></td>
            </tr>
        </table>
    </div>

    <div id="select_monthly" style="display:none">
        Powtarzaj co <input id="monthly_every" style="width: 20px;" value="1" /> miesiąc.
        <div id="select_monthly_error" style="display:none; margin-top: 5px; padding: 2px; background-color: #FFF1A8;">Proszę wybrać przynajmniej jeden dzień:</div>
        <br />
        <label for="monthly_1"><input type="checkbox" id="monthly_1" />1</label>
        <label for="monthly_2"><input type="checkbox" id="monthly_2" />2</label>
        <label for="monthly_3"><input type="checkbox" id="monthly_3" />3</label>
        <label for="monthly_4"><input type="checkbox" id="monthly_4" />4</label>
        <label for="monthly_5"><input type="checkbox" id="monthly_5" />5</label>
        <label for="monthly_6"><input type="checkbox" id="monthly_6" />6</label>
        <label for="monthly_7"><input type="checkbox" id="monthly_7" />7</label>
        <label for="monthly_8"><input type="checkbox" id="monthly_8" />8</label>
        <label for="monthly_9"><input type="checkbox" id="monthly_9" />9</label>
        <label for="monthly_10"><input type="checkbox" id="monthly_10" />10</label>
        <label for="monthly_11"><input type="checkbox" id="monthly_11" />11</label>
        <label for="monthly_12"><input type="checkbox" id="monthly_12" />12</label>
        <label for="monthly_13"><input type="checkbox" id="monthly_13" />13</label>
        <label for="monthly_14"><input type="checkbox" id="monthly_14" />14</label>
        <label for="monthly_15"><input type="checkbox" id="monthly_15" />15</label>
        <label for="monthly_16"><input type="checkbox" id="monthly_16" />16</label>
        <label for="monthly_17"><input type="checkbox" id="monthly_17" />17</label>
        <label for="monthly_18"><input type="checkbox" id="monthly_18" />18</label>
        <label for="monthly_19"><input type="checkbox" id="monthly_19" />19</label>
        <label for="monthly_20"><input type="checkbox" id="monthly_20" />20</label>
        <label for="monthly_21"><input type="checkbox" id="monthly_21" />21</label>
        <label for="monthly_22"><input type="checkbox" id="monthly_22" />22</label>
        <label for="monthly_23"><input type="checkbox" id="monthly_23" />23</label>
        <label for="monthly_24"><input type="checkbox" id="monthly_24" />24</label>
        <label for="monthly_25"><input type="checkbox" id="monthly_25" />25</label>
        <label for="monthly_26"><input type="checkbox" id="monthly_26" />26</label>
        <label for="monthly_27"><input type="checkbox" id="monthly_27" />27</label>
        <label for="monthly_28"><input type="checkbox" id="monthly_28" />28</label>
        <label for="monthly_29"><input type="checkbox" id="monthly_29" />29</label>
        <label for="monthly_30"><input type="checkbox" id="monthly_30" />30</label>
        <label for="monthly_31"><input type="checkbox" id="monthly_31" />31</label>
    </div>

    <div id="select_annually" style="display:none">
    </div>

    <div id="range" style="display:none">
        <div style="border-bottom: 2px solid #d0d0d0; margin-top:10px; margin-bottom: 10px;"></div>
        <label for="repeat_indefinitely"><input type="radio" name="repeat_range" id="repeat_indefinitely" />Powtarzaj nieskończenie</label><br />
        <label for="repeat_until"><input type="radio" name="repeat_range" id="repeat_until" />Powtarzaj do </label><input id="repeat_until_value" style="width: 150px;" value="12/31/2099" /><br />
        <label for="repeat_times"><input type="radio" name="repeat_range" id="repeat_times" />Powtarzaj </label><input id="repeat_times_value" style="width: 20px;" /> razy.<br />
    </div>

    <script type="text/javascript">
    var r = new DayPilot.Recurrence();
    r.saveButtonId = "ButtonSave";
    r.jsonHiddenId = "Recurrence";
    r.config = @ViewData["RecurrenceJson"];
    r.onChange = function(args) {
        var last = parent.DayPilot.ModalStatic.list.length - 1;
        parent.DayPilot.ModalStatic.list[last].stretch();
    };
    r.onError = function(args) {
        var last = parent.DayPilot.ModalStatic.list.length - 1;
        parent.DayPilot.ModalStatic.list[last].stretch();
    };
    r.Init();
    </script>

    <!-- Recurrence section ends here -->


    <div class="space">
        @Html.Hidden("Recurrence")
        <input type="submit" value="Zapisz" id="ButtonSave" />
        <a href="javascript:close()">Anuluj</a>
    </div>
    <div class="space">&nbsp;</div>
</form>

<script type="text/javascript">
    function close(result) {
        if (parent && parent.DayPilot && parent.DayPilot.ModalStatic) {
            parent.DayPilot.ModalStatic.close(result);
        }
    }

    $("#f").submit(function () {
        var f = $("#f");
        $.post(f.action, f.serialize(), function (result) {
            close(eval(result));
        });
        return false;
    });

    $(document).ready(function () {
        $("#Text").focus();
    });

</script>
</body>
</html>
